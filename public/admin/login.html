<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calmiqs Admin Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#4FA49A",
              accent: "#FFD580",
              tech: "#5A67D8",
            },
            fontFamily: { sans: ["Poppins", "sans-serif"] },
          },
        },
      };
    </script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      body {
        background: linear-gradient(135deg, #4fa49a 0%, #ffd580 100%);
        min-height: 100vh;
      }
      .login-card {
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.95);
      }
    </style>
  </head>

  <body class="font-sans flex items-center justify-center">
    <!-- Logo/Home Link -->
    <a href="/" class="fixed top-6 left-6 flex items-center gap-2 z-10">
      <img src="/assets/logo.svg" alt="Calmiqs Logo" class="h-8 w-8" />
      <span class="text-white font-bold text-lg">Calmiqs</span>
    </a>

    <!-- Login Container -->
    <div class="w-full max-w-md px-6">
      <div class="login-card rounded-2xl shadow-2xl p-8 md:p-10">
        <!-- Header -->
        <div class="text-center mb-8">
          <div class="inline-block bg-primary text-white p-4 rounded-full mb-4">
            <i class="fas fa-lock text-2xl"></i>
          </div>
          <h1 class="text-3xl font-bold text-gray-800 mb-2">Admin Login</h1>
          <p class="text-gray-600">Access the Calmiqs content editor</p>
        </div>

        <!-- Login Form -->
        <form id="loginForm" class="space-y-6">
          <!-- Password Input -->
          <div>
            <label for="password" class="block text-sm font-medium text-gray-700 mb-2">
              Admin Password
            </label>
            <div class="relative">
              <input
                type="password"
                id="password"
                name="password"
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                placeholder="Enter admin password"
                autocomplete="off"
              />
              <button
                type="button"
                id="togglePassword"
                class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"
              >
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>

          <!-- Remember Me -->
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" id="rememberMe" class="w-4 h-4 accent-primary rounded" />
            <span class="text-sm text-gray-600">Remember me for 24 hours</span>
          </label>

          <!-- Error Message -->
          <div
            id="errorMessage"
            class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm"
          ></div>

          <!-- Submit Button -->
          <button
            type="submit"
            class="w-full bg-primary hover:bg-accent text-white font-semibold py-3 rounded-lg transition shadow-lg hover:shadow-xl"
          >
            <span id="submitText">Login to Editor</span>
            <i class="fas fa-spinner fa-spin hidden" id="spinner"></i>
          </button>

          <!-- Info Box -->
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-700">
            <i class="fas fa-info-circle mr-2"></i>
            <strong>Demo credentials:</strong>
            <br />
            Password:
            <code class="bg-white px-2 py-1 rounded">Hadia@2017</code>
          </div>
        </form>

        <!-- Footer -->
        <div class="mt-8 pt-6 border-t border-gray-200 text-center text-sm text-gray-600">
          <p>
            Not authorized?
            <a href="/" class="text-primary hover:text-accent font-medium">Back to home</a>
          </p>
        </div>
      </div>
    </div>

    <!-- Script -->
    <script>
      const ADMIN_PASSWORD = "Hadia@2017";
      const AUTH_EXPIRATION = 24 * 60 * 60 * 1000; // 24 hours

      const loginForm = document.getElementById("loginForm");
      const passwordInput = document.getElementById("password");
      const togglePasswordBtn = document.getElementById("togglePassword");
      const rememberMeCheckbox = document.getElementById("rememberMe");
      const errorMessage = document.getElementById("errorMessage");
      const submitBtn = loginForm.querySelector("button[type='submit']");
      const submitText = document.getElementById("submitText");
      const spinner = document.getElementById("spinner");

      // Check if already logged in
      window.addEventListener("load", () => {
        if (isStillAuthenticated()) {
          window.location.href = "/admin/dashboard.html";
        }
      });

      // Toggle password visibility
      togglePasswordBtn.addEventListener("click", () => {
        const type = passwordInput.getAttribute("type") === "password" ? "text" : "password";
        passwordInput.setAttribute("type", type);
        togglePasswordBtn.innerHTML =
          type === "password" ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
      });

      // Handle form submission
      loginForm.addEventListener("submit", (e) => {
        e.preventDefault();

        const password = passwordInput.value.trim();

        // Clear error message
        errorMessage.classList.add("hidden");

        // Disable button during submission
        submitBtn.disabled = true;
        spinner.classList.remove("hidden");
        submitText.textContent = "Logging in...";

        // Simulate API call (in real app, verify on backend)
        setTimeout(() => {
          if (password === ADMIN_PASSWORD) {
            // Set auth tokens
            const now = Date.now();
            localStorage.setItem("calmiqsAuth", "true");
            localStorage.setItem("isAdmin", "true");
            localStorage.setItem("calmiqsAuthTimestamp", now.toString());

            if (rememberMeCheckbox.checked) {
              localStorage.setItem("calmiqsAuthExpiration", (now + AUTH_EXPIRATION).toString());
            } else {
              sessionStorage.setItem("calmiqsAuth", "true");
              sessionStorage.setItem("isAdmin", "true");
            }

            // Redirect to dashboard
            window.location.href = "/admin/dashboard.html";
          } else {
            // Show error
            errorMessage.textContent = "âŒ Incorrect password. Please try again.";
            errorMessage.classList.remove("hidden");

            // Re-enable button
            submitBtn.disabled = false;
            spinner.classList.add("hidden");
            submitText.textContent = "Login to Editor";

            // Clear password field
            passwordInput.value = "";
            passwordInput.focus();
          }
        }, 500);
      });

      // Check if authentication is still valid
      function isStillAuthenticated() {
        const isAuth =
          localStorage.getItem("isAdmin") === "true" ||
          sessionStorage.getItem("isAdmin") === "true";

        if (!isAuth) return false;

        // Check expiration if "remember me" was used
        const expiration = localStorage.getItem("calmiqsAuthExpiration");
        if (expiration && Date.now() > parseInt(expiration)) {
          // Auth expired
          localStorage.removeItem("calmiqsAuth");
          localStorage.removeItem("isAdmin");
          localStorage.removeItem("calmiqsAuthTimestamp");
          localStorage.removeItem("calmiqsAuthExpiration");
          return false;
        }

        return true;
      }

      // Clear session on page unload (optional)
      window.addEventListener("beforeunload", () => {
        // Keep auth tokens active
      });
    </script>
  </body>
</html>
